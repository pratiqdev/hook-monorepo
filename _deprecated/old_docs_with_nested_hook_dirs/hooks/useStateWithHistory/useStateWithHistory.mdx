import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import DemoComponent from './demo_useStateWithHistory'
import {HeadlessTable, RelatedTable, Card, MainText} from '/src/components'
import { getHookDataByTitle } from '/utils/getHooks'
const data = getHookDataByTitle('useStateWithHistory')


<Card><MainText>{data.description}</MainText></Card>



## Usage    
 
```js 
import { useStateWithValidation } from '@pratiq/hooks'

const { value, setValue, history, pointer, forward, back, go } = useStateWithHistory('zap', 10)
```

<!-- ======================================================================= -->
<hr />

## Demo

<DemoComponent />





<!-- ======================================================================= -->
<hr />

## API

### Interfaces
```ts
type T_UseStateWithHistory = <T>(initialValue:any, maxHistory: number) => {
    value: T;
    history: T[],
    pointer: number,
    setValue: (value:any) => void;
    forward: (amount?:number) => void;
    back: (amount?:number) => void;
    goto: (index:number) => void;
}
```

### Config Example

```ts
const {value, setValue, isValid, lastValidValue} = useStateWithValidation({
  value: 25,
  validator: (v:T) => typeof v === 'number' && v > 20
})
```



### Return Values

<HeadlessTable code={2} items={[
    ['@value','any','The value of the current state'],
    ['@history','any[]','An array of all set values, limited in length by <code>maxHistory</code>'],
    ['@pointer','number', 'The index of the current state within the history array'],
]}/>



<!-- ======================================================================= -->
<hr />

## Hook Methods

<Card>

### setValue
Set a new value to state and add new value to the history array

```ts
(newValue: any) => void 
```
```ts
const { setValue } = useStateWithHistory('zap', 10)

setValue('tap')
```

</Card>
<Card>

### forward
Move pointer index forward by the amount provided, or to the next available index

```ts
(amount?:number) => void 
```
```ts
const { forward } = useStateWithHistory('zap', 10)

forward(3)
```

</Card>
<Card>

### back
Move the pointer index back by the amount provided, or to the previous available index

```ts
(amount?:number) => void 
```
```ts
const { back } = useStateWithHistory('zap', 10)

back(4)
```

</Card>
<Card>

### goto
Move the pointer index to the provided index

```ts
(index:number) => void 
```
```ts
const { goto } = useStateWithHistory('zap', 10)

goto(7)
```

</Card>




<!-- ======================================================================= -->
<hr />

## Internal

<RelatedTable hooks={[
  'useState',
  'useRef',
  'useCallback'
]} />


<!-- ======================================================================= -->
<hr />

## Related Hooks






<RelatedTable hooks={[
  'useStateWithValidation',
  'useClamp',
]} />
