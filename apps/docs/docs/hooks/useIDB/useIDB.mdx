import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import { Card, MainText, RelatedTable, HeadlessTable } from '@site/src/components'
import { getHookDataByTitle } from '/utils/getHooks'
const {title, description, content, doc} = getHookDataByTitle('useIDB')

<head>
  <title>{title}</title>
  <meta name="description" content={description} />
</head>

<MainText>
{description}
</MainText>

<MainText>
<h1>useIDB</h1>
Store and manage complex objects in client-side storage using IndexedDB
</MainText>




## Usage

<Tabs>

<TabItem value='simple' label='Simple'>

```js 
import { useIDB } from '@pratiq/hooks'

const db = useIDB({
    key: 'GREETING',
    value: 'Hello',
})

<p>{value}</p>
```

</TabItem>

<TabItem value='advanced' label='Advanced'>

```js
import { useIDB } from '@pratiq/hooks'

const db = useIDB({
    key: 'GREETING',
    value: 'Hello',
})

<p>{value}</p>
<button onClick={() => db.setValue('Welcome')}>Set Value</button>

```

</TabItem>
<TabItem value='full' label='Full'>

```js
import { useIDB } from '@pratiq/hooks'

const { value, setValue, loading, error, reset, remove } = useIDB({
    key: 'GREETING',
    value: 'Hello',
    startWithValue: true
})

```

</TabItem>
</Tabs>







<!--=========================================================================-->

<hr />

## API 

Values used for initial state and internal settings are provided as a config
object 

### Config Example

```ts
const { value, setValue, reset, remove } = useIDB({
    key: 'GREETING',
    value: 'hello',
    startWithValue: false
})
```


### Return Values

<HeadlessTable code items={[
    ['value','number', 'The current state of the clamped value'],
]}/>


### Interfaces
```ts
type T_UseIDBConfig = {
  key?: string;
  value?: any;
  startWithValue?: boolean;
}

type T_UseIDB = (config?: T_UseIDBConfig) => ({
  value: any; 
  setValue: (value:any) => void; 
  loading: boolean; 
  error: boolean;
  reset: () => void;
  remove: (key:string) => void;
})
```












<!--=========================================================================-->

<hr />


## Hook Methods

<Card>

### setValue
Set a new value to IDB storage and to local state

```ts
(newState) => void 
```
```ts
const db = useIDB({
    key: 'GREETING',
    value: 'Hello'
})

db.setValue('Welcome')
```

</Card>
<Card>


### reset
Reset the internal state and IDB storage to the initial value

```ts
() => void 
```
```ts
const db = useIDB({
    key: 'GREETING',
    value: 'Hello'
})

db.reset()
```

</Card>
<Card>


### remove
Remove the item from IDB and set internal value state to null

```ts
() => void 
```
```ts
const db = useIDB({
    key: 'GREETING',
    value: 'Hello'
})

db.remove()
```

</Card>










<!--=========================================================================-->

<hr />


## Internal

This hook internally uses the `useState` hook to store...



<!--=========================================================================-->

<hr />


## Related Hooks


<RelatedTable hooks={['useStorage', 'useCookie']} />
